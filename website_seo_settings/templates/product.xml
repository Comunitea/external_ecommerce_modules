<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!-- The product template changes -->
    <template id="website_sale_product" name="Product Seo" inherit_id="website_sale.product">

        <!-- Product descriptions -->
        <xpath expr="//div[@id='product_details']//div[hasclass('o_not_editable')]" position="after">
            <div class="o_not_editable">
                <hr t-if="product.description_short" />
                <p t-field="product.description_short"/>
            </div>
        </xpath>
        <xpath expr="//div[@id='product_full_description']" position="replace">
            <div class="oe_structure mt16 mb16" id="product_full_description" t-if="product.description_full">
                <div class="container" t-if="len(product.description_full) > 15" itemprop="description">
                    <div class="oe_structure mt16" t-field="product.description_full"/>
                </div>
            </div>
        </xpath>

        <!-- ECommerce category link in breadcrumbs without breadcrumbs_base_tmp module installed -->
<!--        <xpath expr="//ol[hasclass('breadcrumb')]/li[@t-if='category']" position="replace">-->
<!--            <li t-if="product.public_categ_ids">-->
<!--                <t t-set="inc" t-value="0"/>-->
<!--                <t t-foreach="product.public_categ_ids" t-as="cat">-->
<!--                    <t t-if="inc==0">-->
<!--                        <a t-att-href="'/category/%s' % cat.slug if cat.slug else '/shop/category/%s' % slug(cat)" t-field="cat.name" />-->
<!--                    </t>-->
<!--                    <t t-set="inc" t-value="inc+1"/>-->
<!--                </t>-->
<!--            </li>-->
<!--        </xpath>-->

        <!-- Hide guarantee -->
        <xpath expr="//div[@id='product_details']/p[last()]" position="attributes">
            <attribute name="t-if">True == False</attribute>
        </xpath>
    </template>

    <!-- Product item used by /shop and /shop/cart -->
    <template id="website_sale_products_item" name="Product Item Seo" inherit_id="website_sale.products_item">
        <!-- Image URL and attributes -->
        <xpath expr="//div[hasclass('oe_product_image')]/a/span" position="replace">
            <span><img t-att-alt="product.name" t-att-title="product.name" t-attf-src="/web/image/product.template/{{product.id}}/image_medium"/></span>
        </xpath>
        <!-- Friendly URL for product (from image) -->
        <xpath expr="//div[hasclass('oe_product_image')]/a" position="attributes">
            <attribute name="t-att-href">'/product/{}'.format(product.slug) if product.slug else keep('/shop/product/%s' % slug(product))</attribute>
        </xpath>
        <!-- Friendly URL for product (from name) -->
        <xpath expr="//a[@itemprop='name']" position="attributes">
            <attribute name="t-att-href">'/product/{}'.format(product.slug) if product.slug else keep('/shop/product/%s' % slug(product))</attribute>
        </xpath>
    </template>

    <!-- Product item add to cart button used by /shop -->
    <template id="website_sale_products_add_to_cart" name="Add to Cart Seo" inherit_id="website_sale.products_add_to_cart">
        <xpath expr="//t[2]/a" position="attributes">
            <attribute name="t-att-href">keep('/product/{}', page=(pager['page']['num'] if pager['page']['num']&gt;1 else None)).format(product.slug) if product.slug else keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))</attribute>
        </xpath>
    </template>

     <template id="website_sale_shop_product_carousel" name="Shop Product Carousel Seo" inherit_id="website_sale.shop_product_carousel">
         <!-- Image URL and attributes -->
         <xpath expr="//div[hasclass('carousel-inner')]" position="replace">
             <div class="carousel-inner">
                 <div t-if="variant_img" class="carousel-item active">
                     <img t-att-alt="product.name" t-att-title="product.name" class="product_detail_img js_variant_img"
                          t-attf-src="/website/image/product.template/{{product.id}}/image/" itemprop="image"/>
                 </div>
                 <div t-attf-class="carousel-item#{'' if variant_img else ' active'}">
                     <img t-att-alt="product.name" t-att-title="product.name" class="product_detail_img"
                          t-attf-src="/website/image/product.template/{{product.id}}/image/" itemprop="image"/>
                 </div>
                 <t t-if="len(image_ids)" t-foreach="image_ids" t-as="pimg">
                     <div class="carousel-item">
                         <img t-att-alt="pimg.name" t-att-title="pimg.name" class="product_detail_img"
                              t-attf-src="/web/image/product.image/{{pimg.id}}/image/" itemprop="image"/>
                     </div>
                 </t>
             </div>
         </xpath>
        <xpath expr="//ol[hasclass('carousel-indicators')]" position="replace">
            <ol t-if="len(image_ids) or variant_img" class="carousel-indicators">
                <li t-if="variant_img" data-target="#o-carousel-product" data-slide-to="0" class="active">
                    <img class="img img-fluid js_variant_img_small" t-attf-src="/website/image/product.product/{{product_variant.id}}/image/90x90" t-att-alt="product.name" t-att-title="product.name"/>
                </li>
                <li data-target="#o-carousel-product" t-att-data-slide-to="1 if variant_img else '0'" t-att-class="'' if variant_img else 'active'">
                    <img class="img img-fluid" t-attf-src="/website/image/product.template/{{product.id}}/image/90x90" t-att-alt="product.name" t-att-title="product.name"/>
                </li>
                <t t-if="len(image_ids)" t-foreach="image_ids" t-as="pimg">
                    <li data-target="#o-carousel-product" t-att-data-slide-to="pimg_index + (variant_img and 2 or 1)">
                        <img class="img img-fluid" t-attf-src="/website/image/product.image/{{pimg.id}}/image/90x90" t-att-alt="pimg.name" t-att-title="pimg.name"/>
                    </li>
                </t>
            </ol>
        </xpath>
     </template>

</odoo>